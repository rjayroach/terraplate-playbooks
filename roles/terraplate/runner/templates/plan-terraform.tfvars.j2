#jinja2: lstrip_blocks: True
terragrunt = {
  terraform {
    # NOTE: This is used to source provider secrets, e.g. GitHub token
    extra_arguments "variables" {
      commands  = ["${get_terraform_commands_that_need_locking()}"]
      arguments = [
{# TODO: Implement for tfvars that exist outside the cwd #}
{% for var_path in (var_paths | default([])) %}
        "-var-file=${get_tfvars_dir()}/{{ spec.terraplate.component.relative_root_path }}{{ var_path }}",
{% endfor %}
      ]
    }
  }
  include = {
    path = "${find_in_parent_folders()}"
  }
{% if spec.metadata.dependencies | length > 0 %}
  dependencies {
    paths = [
  {% for dependency in spec.metadata.dependencies %}
      "{{ dependency }}",
  {% endfor %}
    ]
  }
{% endif %}
}
